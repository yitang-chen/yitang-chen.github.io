<!DOCTYPE html>
<html>
<head>
  <!-- TapPay TPDirect JS SDK -->
  <script src="https://pay.google.com/gp/p/js/pay.js"></script>
  <script src="https://js.tappaysdk.com/sdk/tpdirect/v5.19.1"></script>
  <script src="https://js.tappaysdk.com/sdk/tpdirect/v5.18.0"></script>
<script>
  function triggerGooglePay() {
    TPDirect.setupSDK(
      163839,
      'app_BsGYXMKSjUKE4E4ZvIushCI2nTtP9PSbfzsh2IJmLD2lF7O1Aq1EI8379naC',
      'sandbox'
    );

    const googlePaySetting = {
      googleMerchantId: "Come from google portal",
      tappayGoogleMerchantId: "Come from tappay portal",
      allowedCardAuthMethods: ["PAN_ONLY", "CRYPTOGRAM_3DS"],
      merchantName: "TapPay Test!",
      emailRequired: true,
      shippingAddressRequired: true,
      billingAddressRequired: true,
      billingAddressFormat: "MIN",
      allowPrepaidCards: true,
      allowedCountryCodes: ['TW'],
      phoneNumberRequired: true
    };
    TPDirect.googlePay.setupGooglePay(googlePaySetting);

    const paymentRequest = {
      allowedNetworks: ["AMEX", "JCB", "MASTERCARD", "VISA"],
      price: "123",
      currency: "TWD"
    };

    TPDirect.googlePay.setupPaymentRequest(paymentRequest, function (err, result) {
      if (result.canUseGooglePay) {
        TPDirect.googlePay.setupGooglePayButton({
          el: document.createElement('div'), // 不插入 UI
          color: "black",
          type: "long",
          getPrimeCallback: function (err, prime) {
            console.log("Prime:", prime);
            alert("Prime: " + prime);
          }
        }).click(); // 直接觸發 click
      } else {
        alert("Google Pay not available");
      }
    });
  }
</script>


  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="A new Flutter project.">

  <!-- iOS meta tags & icons -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="tap_pay_poc">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png"/>

  <title>tap_pay_poc</title>
  <link rel="manifest" href="manifest.json">
</head>
<body>
  <script src="flutter_bootstrap.js" async></script>
</body>
</html>
